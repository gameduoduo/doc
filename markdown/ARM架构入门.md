# 1.概述
ARM架构为处理器或核，以及处理单元（PE）的设计提供了基础。
ARM架构广泛应用于各类技术，集成片上系统设备，如：智能手机、微电脑、嵌入式设备、服务器甚至超级电脑。
ARM架构为软件开发人员提供通用指令集和工作流（即编程者模型）。这有助于确保不同架构工具之间的交互性，以致于软件可以运行在不同的ARM设备上。
本指南为对ARM架构感兴趣的所有人介绍了ARM架构、在学习本指南之前不需要有ARM架构的知识，但需要熟悉一般处理器和程序设计以及相关术语。
在本指南的末尾，你可以在[小测验](#jump)中检测一下所学知识。你学到了基于ARM的不同的profile以及某些架构或微架构所特有的特性。
# 2.关于ARM架构
ARM架构是当前最流行的处理器架构之一。每年有上亿个基于ARM架构的设备上市。
下表描述了三种不同架构概述A、R和M。
| A型（应用） | R型（实时性）| M型（微处理器）|
|------------|-------------|---------------|
| 高性能      |实时性要求高的系统|小型，高能效设备|
|运行在复杂操作系统，如：Linux或Windows | 通常应用于网络设备和嵌入式控制系统 | 应用于许多物联设备上|
上述三种类型的profile允许ARM架构被裁剪成所需要的不用使用场景，同时它们仍然享有一些基本特征。
```（没翻译好）
ARM Cortext和ARM Neoverse是应用在ARM处理器IP时的商标名称。我们的合作伙伴，在使用ARM架构时，提供了其他处理器商标。
```
下面的图例展示了一个基于ARM系统的示例。
（缺图）
此例子中，只能手机包括以下处理器类型：
* 一个A-profile处理器作为主CPU运行在操作系统（如安卓）中。
* 一个蜂窝式处理器（基于R-profile处理器）提供连通性。
* 几个M-profile处理器负责系统电源的管理。
* 一个SIM卡使用SecurCore（M-profile处理器）有额外的安全特性。
本指南，我们将只看到A-profile架构和它最新的两个版本，即Armv8-A和Armv-A。
# 3.架构指的是什么？
当我们使用到架构这个术语时，我们指的是功能上的规格。再以Arm架构为例中，我们的指的是处理器的功能规格。架构特指的是一个处理器的表现，如它所具有的指令和这些指令能做什么。
你可以把架构看成硬件和软件之间的契约。架构提供了软件依赖于硬件所提供的功能。一些特性是可选的，如我们提到的架构和微架构。
架构指标：
|-  |描述    |
|----|--------------|
|指令集 |每一个指令的功能 在存储器中指令是怎么存储的。|
|寄存集 | 有多少个寄存器 寄存器大小，寄存器功能，它们的初始状态。 |
| 异常模型 | 不同的优先级 例外类型 从例外中返回 |
|内存模型 | 内存是怎么按顺序访问的 cache是怎么工作的，软件必须进行直接的维护 |
|Debug，trace和profiling | 断点是怎么被设置和触发的 通过trace工具，可以捕捉到什么格式的信息 |
# 4.系统架构
系统不仅仅包括一个处理核。ARM提供了多个规格说明书来描述包括处理器在内的系统需求。如下图所示。（缺图）
规格说明是软件兼容的基础。根据规格说明来构建硬件意味着写入的软件必须匹配。根据规格说明来写软件意味着软件可在可兼容的硬件上运行。ARM架构的第一层，为通过指令集架构兼容性的软件提供了通用程序员模型。
基础系统架构（BSA）规格说明描述了软件所依赖的硬件系统架构。基础系统架构涵盖了处理器欧诺个架构的各个方面。例如：中断控制，时间，以及操作系统所需的其他通用设备。为标准操作系统，虚拟机管理程序，固件提供了可靠平台。 
基础系统架构（BSA）广泛应用于各类市场和使用实例中。一些其他的标准可以建立在基础系统架构（BSA）之上，并提供市场特定的标准。例如：服务器基础系统架构（SBSA）就是基础系统架构针对服务器的一个补充。SBSA描述了服务器操作系统的硬件和特性需求。这个规格说明包括一套文档硬件特性描述CPU架构进程。 
BBR（基础启动需求）规格说明包括各类基于ARM架构和操作系统以及虚拟机程序管理的系统需求。这个规格说明建立了固件接口需求，如PSCI、SMCCC、UEFI、ACPI和SMBIOS。 
BBR也为特定的使用实例提供了方法。例如： 
* SBBR：明确规定UEFI、ACPI和SMBIOS需求，以启动通用的现成的操作系统和虚拟机管理程序，如：Windows、VMware、RHEL、Oracle Linux和Amazon Linux。SBBR也支持其他操作系统，如：Debian、Fedora、CentOS、SLES、Ubuntu、OpenSUSE、FreeBSD和NetBSD。
* EBBR：和EBBR规格说明一起明确规定UEFI需求，以启动通用现成的操作系统，如：Debian、FEdora、Ubuntu、openSUSE和提供垂直的集成的操作系统平台。
* LBBR：明确规定潜在需求，为LinuxBoot固件启动一些虚拟机程序使用的操作系统。
# 5.架构和微架构
架构没有告诉你一个处理器是怎么建立起来和工作的。处理器的建立和设计通常指的是微架构。微架构一个特定的处理器是如何工作的。
微架构包括以下内容：
* 管道长度和层次
* 缓存的数量和大小
* 单个指令的循环计数
* 实施的可选特性
例如：Cortex-A53和Cortex-A72都应用于Armv8-A架构。也就是它们都有同样的架构，但是它们的微架构不同。如下图所示。（缺图）

|架构   |Cortex-A53 | Cortex-A72 |
| ------|------| -----|
|缓存 | L1 L缓存：8KB~64 KB L1 D缓存：8KB~64KB  L2 缓存：可选，最大2 MB | L1I缓存：固定48kb   L1 D缓存：固定 32KB L2缓存：强制性的，最大2MB|

架构兼容的软件可运行在Cortext-A53或Cortext-A72上而不需要做任何软件上的修改，这是因为它们基于同一架构。
# 6.基于ARM架构的开发
ARM架构的开发经过了一段时间，每一个版本的构建都继承了前一版本。你通常看到的架构如：
```Armv8-A
```
含义是：版本8的架构为基于A-profile。或缩写成：
```
v8-A
```
**Armv8-A**
Armv8-A面世于2011年，是第一个64位版本的Arm架构。基于Armv8-A的设备应用于移动电话、超级电脑等方方面面。
**Armv9-A**
Armv9-A是基于A-profile架构的最新版本，Armv9构建在Armv8之上，增加了一些特性，如：
* 可扩展的矢量延长，版本2（SVE2）
* 业务的存储延长（TME）
* 分支记录buffer延长（BRBE）
* 嵌入式跟踪延长（ETE）
* 跟踪buffer延长（TRBE）
同时，一些在Armv8-A的可选特性在Armv9-A中为必选。 

**每年的更新**
ARM发布每年的架构更新，新增了一些指令和特性。Armv9-A和Armv8.5-A一致，Armv9-A内部继承了所有Armv8.5-A的特性的同时，也增加了新特性。在Armv9-A初始发布后，Armv8-A和Armv9-A都同时被更新。Arm将发布Ar1mv9-A新特性，也会继续维护和更新Armv8-A。如下图所示。（缺图）
你可以在每年的更新中找到更多的信息[理解Armv8-A的扩展]（外部链接）。
# 7.其他ARM架构相关
ARM架构以ARM规格说明最为著名，但不仅于此，ARM对组成片上系统的组件都有相似的规格说明。如下图所示。（缺图）
* 通用中断控制器：通用中断控制器（GIC）为Armv7-A/R和Armv8-A/R指定了一个中断控制器标准。
* 系统存储管理单元：系统存储管理单元（SMMU或IOMMU）提供了到非处理主机的转化业务。
* 通用计时器：通用计时器在系统里为通用参考系统计数提供了所有的处理。用了功能这些计时器为诸如操作系统计划tick提供了功能。通用计时器是Arm架构的一部分，但是系统计数器是系统的组件。
* 服务器基础系统架构和可信基础系统架构：为片上系统开发人员提供了系统设计指导。
* 先进的微控制器总线架构：在基于Arm的系统中，控制组件间的连接和这些连接的协议。
# 8.了解ARM文档
Arm为开发人员提供了很多文档。在这个指南中，我们解阐述了该怎样去找到文档和关于Arm的开发信息。
**文档在哪里？**
你可以在[Arm开发者网站](https://developer.arm.com)下载关于Arm架构和处理器手册。
你也可以在[Arm社区](https://community.arm.com)咨询开发问题并相关的主题和博客中寻找相关的答案。
**文档中描述了些什么?**
不同类型的文档描述了不同的内容：
* 每一篇Arm架构参考手册描述的是Arm架构规格说明。Arm架构参考手册内容和每一个架构的具体实施是相关的。
* 每一个Arm Cortex处理器都有一本技术参考手册（TRM）。TRM描述了处理器的特性规格，通常TRM中不再重复ARM架构手册中的信息。
* 每一个Arm Cortex处理器都有一个配置和综合手册（CIM）。这本CIM描述了如何将处理器集成到系统中。通常这部分内容之和片上系统开发人员相关。
  （待补充）
# 9.通用架构术语
在文档中，架构中使用的一些术语通常用小写字母来描述，这些小写字母都有特定的含义。架构参考手册中给这些术语明确了含义。在这部分，我们查询最通用的术语并为程序设计人员提供补充信息。
**PE Processing Element**
Processing Element（PE）是ARM架构实施中非常普遍的一个术语。你可以把PE看成是拥有程序计数器并可以执行程序的。例如：ARM架构参考手册中提到：

# 10. 小测验
<html><span id="jump"></span>
</html>
下列题将帮助你检测所学知识。 
<b>如果在一份文档中，你看到Armv7-R，那么指的是什么版本和profile？</b>  
Version 7，
